# Add device-code flow or "paste token" auth mode

**Labels:** `type:feature`, `prio:high`  
**Milestone:** v0.5 — Profiles, Auth, Reliability  
**Epic:** Headless-friendly authentication

## Description

Support a browserless login UX. This enables authentication on servers, SSH sessions, and CI/CD environments where browser-based OAuth is not feasible.

## Acceptance Criteria

- `raps auth login --device` (or equivalent) works without launching a browser
- `raps auth login --token <...>` supported for CI scenarios (document security caveats)
- `raps auth status` shows active profile + token expiry (redacted)

## Current Status

❌ **Not Implemented**: Only browser-based 3-legged OAuth is supported (`auth login` opens browser). No device-code flow or token-based login exists.

## Implementation Notes

- Implement OAuth 2.0 Device Authorization Grant flow:
  1. Request device code from `/authentication/v2/device`
  2. Display user code and verification URL
  3. Poll for token until user authorizes
- Add `raps auth login --device` command
- Add `raps auth login --token <token>` for CI scenarios (with security warnings)
- Update `auth status` to show token expiry (currently only shows if logged in)
- Document security implications of token-based login in docs

## Notes

This is essential for headless/server environments. The token-based login should include clear security warnings in documentation.

