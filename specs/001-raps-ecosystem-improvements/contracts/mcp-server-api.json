{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "RAPS MCP Server API",
  "version": "1.0.0",
  "description": "JSON-RPC 2.0 API contract for RAPS MCP Server tools",
  "type": "object",
  "properties": {
    "tools": {
      "type": "array",
      "description": "List of available MCP tools",
      "items": {
        "type": "object",
        "required": ["name", "description", "inputSchema"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Tool name (e.g., 'ssa_create', 'dm_hubs_list')"
          },
          "description": {
            "type": "string",
            "description": "Human-readable tool description"
          },
          "inputSchema": {
            "type": "object",
            "description": "JSON Schema for tool parameters"
          }
        }
      }
    }
  },
  "definitions": {
    "SSATools": {
      "type": "object",
      "properties": {
        "ssa_create": {
          "name": "ssa_create",
          "description": "Create a new Secure Service Account",
          "inputSchema": {
            "type": "object",
            "required": ["name"],
            "properties": {
              "name": {
                "type": "string",
                "description": "Service account display name"
              }
            }
          }
        },
        "ssa_list": {
          "name": "ssa_list",
          "description": "List all service accounts",
          "inputSchema": {
            "type": "object",
            "properties": {}
          }
        },
        "ssa_key_create": {
          "name": "ssa_key_create",
          "description": "Create a new key for a service account",
          "inputSchema": {
            "type": "object",
            "required": ["account_id"],
            "properties": {
              "account_id": {
                "type": "string",
                "description": "Service account ID"
              }
            }
          }
        },
        "ssa_token": {
          "name": "ssa_token",
          "description": "Exchange SSA JWT assertion for 3-legged access token",
          "inputSchema": {
            "type": "object",
            "required": ["scope"],
            "properties": {
              "scope": {
                "type": "string",
                "description": "OAuth scopes (space-separated)",
                "example": "data:read data:write"
              }
            }
          }
        }
      }
    },
    "DataManagementTools": {
      "type": "object",
      "properties": {
        "dm_hubs_list": {
          "name": "dm_hubs_list",
          "description": "List all accessible hubs (BIM 360/ACC accounts)",
          "inputSchema": {
            "type": "object",
            "properties": {}
          }
        },
        "dm_projects_list": {
          "name": "dm_projects_list",
          "description": "List projects in a hub",
          "inputSchema": {
            "type": "object",
            "required": ["hub_id"],
            "properties": {
              "hub_id": {
                "type": "string",
                "description": "Hub ID"
              }
            }
          }
        },
        "dm_folders_list": {
          "name": "dm_folders_list",
          "description": "List folder contents (items and subfolders)",
          "inputSchema": {
            "type": "object",
            "required": ["project_id", "folder_id"],
            "properties": {
              "project_id": {
                "type": "string"
              },
              "folder_id": {
                "type": "string"
              }
            }
          }
        },
        "dm_versions_list": {
          "name": "dm_versions_list",
          "description": "List all versions of an item",
          "inputSchema": {
            "type": "object",
            "required": ["project_id", "item_id"],
            "properties": {
              "project_id": {
                "type": "string"
              },
              "item_id": {
                "type": "string"
              }
            }
          }
        },
        "dm_tip_version": {
          "name": "dm_tip_version",
          "description": "Get tip (latest) version with derivatives URN",
          "inputSchema": {
            "type": "object",
            "required": ["project_id", "item_id"],
            "properties": {
              "project_id": {
                "type": "string"
              },
              "item_id": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "MCPResponse": {
      "type": "object",
      "required": ["tool_call_id", "content"],
      "properties": {
        "tool_call_id": {
          "type": "string",
          "description": "Request tracing identifier"
        },
        "content": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "type": {
                "type": "string",
                "enum": ["text", "json"]
              },
              "text": {
                "type": "string"
              },
              "json": {
                "type": "object"
              }
            }
          }
        },
        "isError": {
          "type": "boolean",
          "default": false
        }
      }
    }
  }
}
